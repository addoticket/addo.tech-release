"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NestJsMicroservice = void 0;
const microservice_1 = require("../../microservice");
const http_request_1 = require("../../models/http.request");
class NestJsMicroservice extends microservice_1.Microservice {
    constructor(handler) {
        super(handler);
    }
    parseRequest(request) {
        let req = new http_request_1.Request();
        req.queryStringParameters = request.query;
        req.pathParameters = request.params;
        req.headers = JSON.parse(JSON.stringify(request.headers));
        req.body = request.body;
        req.original = request;
        return new http_request_1.HttpRequest(req);
    }
    async getAHandler(event, context, callback) {
        this.context = context;
        this.callback = callback;
        context.callbackWaitsForEmptyEventLoop = false;
        this.http = this.parseRequest(event);
        return await this.handle(this.http);
    }
}
exports.NestJsMicroservice = NestJsMicroservice;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmVzdGpzLm1pY3Jvc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy91dGlscy9odHRwL3NlcnZlcnMvbmVzdGpzL25lc3Rqcy5taWNyb3NlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EscURBQWtEO0FBRWxELDREQUFpRTtBQUVqRSxNQUFhLGtCQUF5QixTQUFRLDJCQUFrQjtJQUk5RCxZQUFZLE9BQXVEO1FBQ2pFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNqQixDQUFDO0lBRUQsWUFBWSxDQUFDLE9BQVk7UUFDdkIsSUFBSSxHQUFHLEdBQVksSUFBSSxzQkFBTyxFQUFFLENBQUM7UUFDakMsR0FBRyxDQUFDLHFCQUFxQixHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUM7UUFDMUMsR0FBRyxDQUFDLGNBQWMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQzFELEdBQUcsQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztRQUN4QixHQUFHLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztRQUN2QixPQUFPLElBQUksMEJBQVcsQ0FBSSxHQUFHLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsS0FBSyxDQUFDLFdBQVcsQ0FBQyxLQUFzQixFQUFFLE9BQWdCLEVBQUUsUUFBa0M7UUFDNUYsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDdkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDekIsT0FBTyxDQUFDLDhCQUE4QixHQUFHLEtBQUssQ0FBQztRQUUvQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDckMsT0FBTyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3RDLENBQUM7Q0FFRjtBQTNCRCxnREEyQkMifQ==