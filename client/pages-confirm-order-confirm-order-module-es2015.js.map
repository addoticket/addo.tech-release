{"version":3,"sources":["./src/app/pages/confirm-order/confirm-order.page.html","./src/app/pages/confirm-order/confirm-order-routing.module.ts","./src/app/pages/confirm-order/confirm-order.module.ts","./src/app/pages/confirm-order/confirm-order.page.scss","./src/app/pages/confirm-order/confirm-order.page.ts"],"names":[],"mappings":"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","file":"pages-confirm-order-confirm-order-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>confirm-order</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ng-container *ngIf=\\\"order\\\">\\n    <ion-grid class=\\\"order\\\">\\n      <ion-row>\\n        <ion-col></ion-col>\\n      </ion-row>\\n      <ion-row class=\\\"header\\\">\\n        <ion-col size=\\\"6\\\">{{'ConfirmOrderPage.table.row.name' | translate}}</ion-col>\\n        <ion-col size=\\\"3\\\">{{'ConfirmOrderPage.table.row.qta' | translate}}</ion-col>\\n        <ion-col size=\\\"3\\\">{{'ConfirmOrderPage.table.row.price' | translate}}</ion-col>\\n      </ion-row>\\n      <ion-row class=\\\"body\\\" *ngFor=\\\"let r of order.rows\\\">\\n        <ion-col size=\\\"6\\\">{{r.name}}</ion-col>\\n        <ion-col size=\\\"3\\\">{{r.qta}}</ion-col>\\n        <ion-col size=\\\"3\\\">{{((r.price || 0)/100).toFixed(2)}}€</ion-col>\\n      </ion-row>\\n      <ion-row class=\\\"footer\\\">\\n        <ion-col size=\\\"9\\\"></ion-col>\\n        <ion-col size=\\\"3\\\">{{'ConfirmOrderPage.table.total' | translate}}: {{total.toFixed(2)}}€</ion-col>\\n      </ion-row>\\n    </ion-grid>\\n\\n    <div class=\\\"ion-text-center\\\" *ngIf=\\\"!order.validated\\\">\\n      <ion-text color=\\\"success\\\">\\n        {{'ConfirmOrderPage.scan_to_print' | translate}}\\n      </ion-text>\\n    </div>\\n    <div class=\\\"ion-text-center\\\" *ngIf=\\\"order.validated\\\">\\n      <ion-text color=\\\"danger\\\">\\n        {{'ConfirmOrderPage.order_not_valid' | translate}} {{order.validated | date:('Common.Date.datetime'|translate)}}\\n      </ion-text>\\n    </div>\\n  </ng-container>\\n  <!-- \\n  <pre *ngIf=\\\"order\\\">\\n    {{order | json}}\\n  </pre> -->\\n</ion-content>\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-button [disabled]=\\\"order && order.validated\\\" (click)=\\\"validate()\\\">\\n      {{'ConfirmOrderPage.print' | translate}}\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-footer>\\n\\n<loading #loading *ngIf=\\\"printerAnimation\\\" [components]=\\\"[printerAnimation]\\\"></loading>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ConfirmOrderPage } from './confirm-order.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ConfirmOrderPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ConfirmOrderPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ConfirmOrderPageRoutingModule } from './confirm-order-routing.module';\n\nimport { ConfirmOrderPage } from './confirm-order.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from '../../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ConfirmOrderPageRoutingModule,\n    ComponentsModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [ConfirmOrderPage]\n})\nexport class ConfirmOrderPageModule {}\n","export default \".order ion-col {\\n  padding: 1em 0;\\n}\\n.order ion-row.header > ion-col {\\n  font-weight: 900;\\n  border-bottom: 1px solid;\\n}\\n.order ion-row.body ion-col {\\n  padding: 1em 0 0 0;\\n}\\n.order ion-row.body > ion-col:last-child {\\n  padding: 1em 0;\\n}\\n.order ion-row.footer > ion-col {\\n  font-weight: 900;\\n  border-top: 1px solid;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY29uZmlybS1vcmRlci9jb25maXJtLW9yZGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNJLGNBQUE7QUFEUjtBQUlJO0VBQ0ksZ0JBQUE7RUFDQSx3QkFBQTtBQUZSO0FBTVE7RUFDSSxrQkFBQTtBQUpaO0FBT1E7RUFDSSxjQUFBO0FBTFo7QUFTSTtFQUNJLGdCQUFBO0VBQ0EscUJBQUE7QUFQUiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NvbmZpcm0tb3JkZXIvY29uZmlybS1vcmRlci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIub3JkZXIge1xuXG4gICAgaW9uLWNvbCB7XG4gICAgICAgIHBhZGRpbmc6IDFlbSAwO1xuICAgIH1cblxuICAgIGlvbi1yb3cuaGVhZGVyPmlvbi1jb2wge1xuICAgICAgICBmb250LXdlaWdodDogOTAwO1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgfVxuXG4gICAgaW9uLXJvdy5ib2R5IHtcbiAgICAgICAgaW9uLWNvbCB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxZW0gMCAwIDA7XG4gICAgICAgIH1cblxuICAgICAgICA+aW9uLWNvbDpsYXN0LWNoaWxkIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDFlbSAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW9uLXJvdy5mb290ZXI+aW9uLWNvbCB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA5MDA7XG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZDtcbiAgICB9XG59Il19 */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { OrdersService } from '../../services/orders.service';\nimport { LoadingController, NavController } from '@ionic/angular';\nimport { PrinterAnimationComponent } from '../../components/printer-animation/printer-animation.component';\nimport { LoadingComponent } from '../../components/loading/loading.component';\n\n@Component({\n  selector: 'app-confirm-order',\n  templateUrl: './confirm-order.page.html',\n  styleUrls: ['./confirm-order.page.scss'],\n})\nexport class ConfirmOrderPage implements OnInit {\n\n  @ViewChild('loading') loading: LoadingComponent;\n\n  public order: any;\n  public total: number = 0;\n  public printerAnimation = PrinterAnimationComponent;\n  private timeout;\n\n  constructor(private route: ActivatedRoute, private ordersService: OrdersService, private loadingCtrl: LoadingController, private navCtrl: NavController) { }\n\n  async ngOnInit() {\n\n    this.timeout = setTimeout(() => {\n      this.navCtrl.navigateRoot('/');\n    }, 20000)\n\n    let loading = await this.loadingCtrl.create({ message: \"loading...\" });\n    loading.present();\n    this.ordersService.findById(this.route.snapshot.params.id)\n      .subscribe((res: any) => {\n        loading.dismiss();\n        this.order = res;\n        this.total = this.order.rows.map(r => r.price * r.qta).reduce((a, b) => a + (b), 0) / 100;\n      }, err => {\n        loading.dismiss();\n      })\n  }\n\n  ionViewWillLeave() {\n    clearTimeout(this.timeout);\n  }\n\n  async validate() {\n    this.loading.show()\n    clearTimeout(this.timeout);\n\n    // let loading = await this.loadingCtrl.create({message: \"loading...\"});\n    // loading.present();\n    this.ordersService.validateOrder(this.order)\n      .subscribe(res => {\n        this.order = res\n        // loading.dismiss();\n        this.loading.hide()\n\n      }, err => {\n        // loading.dismiss();\n        this.loading.hide()\n      })\n  }\n}\n"],"sourceRoot":"webpack:///"}