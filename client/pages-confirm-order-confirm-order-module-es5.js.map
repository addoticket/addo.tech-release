{"version":3,"sources":["webpack:///src/app/pages/confirm-order/confirm-order.page.html","webpack:///src/app/pages/confirm-order/confirm-order-routing.module.ts","webpack:///src/app/pages/confirm-order/confirm-order.module.ts","webpack:///src/app/pages/confirm-order/confirm-order.page.scss","webpack:///src/app/pages/confirm-order/confirm-order.page.ts"],"names":["routes","path","component","ConfirmOrderPageRoutingModule","imports","forChild","exports","ConfirmOrderPageModule","declarations","ConfirmOrderPage","route","ordersService","loadingCtrl","navCtrl","total","printerAnimation","timeout","setTimeout","navigateRoot","create","message","loading","present","findById","snapshot","params","id","subscribe","res","dismiss","order","rows","map","r","price","qta","reduce","a","b","err","clearTimeout","show","validateOrder","hide","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,6BAA6B;AAAA;AAAA,O;;AAA7BA,mCAA6B,6DAJzC,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIyC,GAA7BH,6BAA6B,CAA7B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCOAI,sBAAsB;AAAA;AAAA,O;;AAAtBA,4BAAsB,6DAXlC,+DAAS;AACRH,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,2FAJO,EAKP,8EALO,EAMP,oEAAgBC,QAAhB,EANO,CADD;AASRG,oBAAY,EAAE,CAAC,oEAAD;AATN,OAAT,CAWkC,GAAtBD,sBAAsB,CAAtB;;;;;;;;;;;;;;;;ACvBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCYFE,gBAAgB;AAS3B,kCAAoBC,KAApB,EAAmDC,aAAnD,EAAyFC,WAAzF,EAAiIC,OAAjI,EAAyJ;AAAA;;AAArI,eAAAH,KAAA,GAAAA,KAAA;AAA+B,eAAAC,aAAA,GAAAA,aAAA;AAAsC,eAAAC,WAAA,GAAAA,WAAA;AAAwC,eAAAC,OAAA,GAAAA,OAAA;AAJ1H,eAAAC,KAAA,GAAgB,CAAhB;AACA,eAAAC,gBAAA,GAAmB,mHAAnB;AAGqJ;;AATjI;AAAA;AAAA,qCAWV;;;;;;;;;AAEf,2BAAKC,OAAL,GAAeC,UAAU,CAAC,YAAM;AAC9B,6BAAI,CAACJ,OAAL,CAAaK,YAAb,CAA0B,GAA1B;AACD,uBAFwB,EAEtB,KAFsB,CAAzB;;AAIc,6BAAM,KAAKN,WAAL,CAAiBO,MAAjB,CAAwB;AAAEC,+BAAO,EAAE;AAAX,uBAAxB,CAAN;;;AAAVC,6B;AACJA,6BAAO,CAACC,OAAR;AACA,2BAAKX,aAAL,CAAmBY,QAAnB,CAA4B,KAAKb,KAAL,CAAWc,QAAX,CAAoBC,MAApB,CAA2BC,EAAvD,EACGC,SADH,CACa,UAACC,GAAD,EAAc;AACvBP,+BAAO,CAACQ,OAAR;AACA,6BAAI,CAACC,KAAL,GAAaF,GAAb;AACA,6BAAI,CAACd,KAAL,GAAa,KAAI,CAACgB,KAAL,CAAWC,IAAX,CAAgBC,GAAhB,CAAoB,UAAAC,CAAC;AAAA,iCAAIA,CAAC,CAACC,KAAF,GAAUD,CAAC,CAACE,GAAhB;AAAA,yBAArB,EAA0CC,MAA1C,CAAiD,UAACC,CAAD,EAAIC,CAAJ;AAAA,iCAAUD,CAAC,GAAIC,CAAf;AAAA,yBAAjD,EAAoE,CAApE,IAAyE,GAAtF;AACD,uBALH,EAKK,UAAAC,GAAG,EAAI;AACRlB,+BAAO,CAACQ,OAAR;AACD,uBAPH;;;;;;;;;AAQD;AA3B0B;AAAA;AAAA,6CA6BR;AACjBW,wBAAY,CAAC,KAAKxB,OAAN,CAAZ;AACD;AA/B0B;AAAA;AAAA,qCAiCV;;;;;;;;AACf,2BAAKK,OAAL,CAAaoB,IAAb;AACAD,kCAAY,CAAC,KAAKxB,OAAN,CAAZ,C,CAEA;AACA;;AACA,2BAAKL,aAAL,CAAmB+B,aAAnB,CAAiC,KAAKZ,KAAtC,EACGH,SADH,CACa,UAAAC,GAAG,EAAI;AAChB,8BAAI,CAACE,KAAL,GAAaF,GAAb,CADgB,CAEhB;;AACA,8BAAI,CAACP,OAAL,CAAasB,IAAb;AAED,uBANH,EAMK,UAAAJ,GAAG,EAAI;AACR;AACA,8BAAI,CAAClB,OAAL,CAAasB,IAAb;AACD,uBATH;;;;;;;;;AAUD;AAjD0B;;AAAA;AAAA,S;;;;gBAXpB;;gBACA;;gBACA;;gBAAmB;;;;;;gBAWzB,uD;AAAS,iBAAC,SAAD;;;AAFClC,sBAAgB,6DAL5B,gEAAU;AACTmC,gBAAQ,EAAE,mBADD;AAETC,gBAAQ,EAAR;AAAA;AAAA,kHAFS;;;;AAAA,OAAV,CAK4B,GAAhBpC,gBAAgB,CAAhB","file":"pages-confirm-order-confirm-order-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>confirm-order</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ng-container *ngIf=\\\"order\\\">\\n    <ion-grid class=\\\"order\\\">\\n      <ion-row>\\n        <ion-col></ion-col>\\n      </ion-row>\\n      <ion-row class=\\\"header\\\">\\n        <ion-col size=\\\"6\\\">{{'ConfirmOrderPage.table.row.name' | translate}}</ion-col>\\n        <ion-col size=\\\"3\\\">{{'ConfirmOrderPage.table.row.qta' | translate}}</ion-col>\\n        <ion-col size=\\\"3\\\">{{'ConfirmOrderPage.table.row.price' | translate}}</ion-col>\\n      </ion-row>\\n      <ion-row class=\\\"body\\\" *ngFor=\\\"let r of order.rows\\\">\\n        <ion-col size=\\\"6\\\">{{r.name}}</ion-col>\\n        <ion-col size=\\\"3\\\">{{r.qta}}</ion-col>\\n        <ion-col size=\\\"3\\\">{{((r.price || 0)/100).toFixed(2)}}€</ion-col>\\n      </ion-row>\\n      <ion-row class=\\\"footer\\\">\\n        <ion-col size=\\\"9\\\"></ion-col>\\n        <ion-col size=\\\"3\\\">{{'ConfirmOrderPage.table.total' | translate}}: {{total.toFixed(2)}}€</ion-col>\\n      </ion-row>\\n    </ion-grid>\\n\\n    <div class=\\\"ion-text-center\\\" *ngIf=\\\"!order.validated\\\">\\n      <ion-text color=\\\"success\\\">\\n        {{'ConfirmOrderPage.scan_to_print' | translate}}\\n      </ion-text>\\n    </div>\\n    <div class=\\\"ion-text-center\\\" *ngIf=\\\"order.validated\\\">\\n      <ion-text color=\\\"danger\\\">\\n        {{'ConfirmOrderPage.order_not_valid' | translate}} {{order.validated | date:('Common.Date.datetime'|translate)}}\\n      </ion-text>\\n    </div>\\n  </ng-container>\\n  <!-- \\n  <pre *ngIf=\\\"order\\\">\\n    {{order | json}}\\n  </pre> -->\\n</ion-content>\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-button [disabled]=\\\"order && order.validated\\\" (click)=\\\"validate()\\\">\\n      {{'ConfirmOrderPage.print' | translate}}\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-footer>\\n\\n<loading #loading *ngIf=\\\"printerAnimation\\\" [components]=\\\"[printerAnimation]\\\"></loading>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ConfirmOrderPage } from './confirm-order.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ConfirmOrderPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ConfirmOrderPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ConfirmOrderPageRoutingModule } from './confirm-order-routing.module';\n\nimport { ConfirmOrderPage } from './confirm-order.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from '../../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ConfirmOrderPageRoutingModule,\n    ComponentsModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [ConfirmOrderPage]\n})\nexport class ConfirmOrderPageModule {}\n","export default \".order ion-col {\\n  padding: 1em 0;\\n}\\n.order ion-row.header > ion-col {\\n  font-weight: 900;\\n  border-bottom: 1px solid;\\n}\\n.order ion-row.body ion-col {\\n  padding: 1em 0 0 0;\\n}\\n.order ion-row.body > ion-col:last-child {\\n  padding: 1em 0;\\n}\\n.order ion-row.footer > ion-col {\\n  font-weight: 900;\\n  border-top: 1px solid;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY29uZmlybS1vcmRlci9jb25maXJtLW9yZGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNJLGNBQUE7QUFEUjtBQUlJO0VBQ0ksZ0JBQUE7RUFDQSx3QkFBQTtBQUZSO0FBTVE7RUFDSSxrQkFBQTtBQUpaO0FBT1E7RUFDSSxjQUFBO0FBTFo7QUFTSTtFQUNJLGdCQUFBO0VBQ0EscUJBQUE7QUFQUiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2NvbmZpcm0tb3JkZXIvY29uZmlybS1vcmRlci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIub3JkZXIge1xuXG4gICAgaW9uLWNvbCB7XG4gICAgICAgIHBhZGRpbmc6IDFlbSAwO1xuICAgIH1cblxuICAgIGlvbi1yb3cuaGVhZGVyPmlvbi1jb2wge1xuICAgICAgICBmb250LXdlaWdodDogOTAwO1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgfVxuXG4gICAgaW9uLXJvdy5ib2R5IHtcbiAgICAgICAgaW9uLWNvbCB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxZW0gMCAwIDA7XG4gICAgICAgIH1cblxuICAgICAgICA+aW9uLWNvbDpsYXN0LWNoaWxkIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDFlbSAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW9uLXJvdy5mb290ZXI+aW9uLWNvbCB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA5MDA7XG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZDtcbiAgICB9XG59Il19 */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { OrdersService } from '../../services/orders.service';\nimport { LoadingController, NavController } from '@ionic/angular';\nimport { PrinterAnimationComponent } from '../../components/printer-animation/printer-animation.component';\nimport { LoadingComponent } from '../../components/loading/loading.component';\n\n@Component({\n  selector: 'app-confirm-order',\n  templateUrl: './confirm-order.page.html',\n  styleUrls: ['./confirm-order.page.scss'],\n})\nexport class ConfirmOrderPage implements OnInit {\n\n  @ViewChild('loading') loading: LoadingComponent;\n\n  public order: any;\n  public total: number = 0;\n  public printerAnimation = PrinterAnimationComponent;\n  private timeout;\n\n  constructor(private route: ActivatedRoute, private ordersService: OrdersService, private loadingCtrl: LoadingController, private navCtrl: NavController) { }\n\n  async ngOnInit() {\n\n    this.timeout = setTimeout(() => {\n      this.navCtrl.navigateRoot('/');\n    }, 20000)\n\n    let loading = await this.loadingCtrl.create({ message: \"loading...\" });\n    loading.present();\n    this.ordersService.findById(this.route.snapshot.params.id)\n      .subscribe((res: any) => {\n        loading.dismiss();\n        this.order = res;\n        this.total = this.order.rows.map(r => r.price * r.qta).reduce((a, b) => a + (b), 0) / 100;\n      }, err => {\n        loading.dismiss();\n      })\n  }\n\n  ionViewWillLeave() {\n    clearTimeout(this.timeout);\n  }\n\n  async validate() {\n    this.loading.show()\n    clearTimeout(this.timeout);\n\n    // let loading = await this.loadingCtrl.create({message: \"loading...\"});\n    // loading.present();\n    this.ordersService.validateOrder(this.order)\n      .subscribe(res => {\n        this.order = res\n        // loading.dismiss();\n        this.loading.hide()\n\n      }, err => {\n        // loading.dismiss();\n        this.loading.hide()\n      })\n  }\n}\n"]}