{"version":3,"sources":["webpack:///src/app/pages/validate-order-code/validate-order-code.page.html","webpack:///src/app/pages/validate-order-code/validate-order-code-routing.module.ts","webpack:///src/app/pages/validate-order-code/validate-order-code.module.ts","webpack:///src/app/pages/validate-order-code/validate-order-code.page.scss","webpack:///src/app/pages/validate-order-code/validate-order-code.page.ts"],"names":["routes","path","component","ValidateOrderCodePageRoutingModule","imports","forChild","exports","ValidateOrderCodePageModule","declarations","ValidateOrderCodePage","navCtrl","ordersService","loadingCtrl","printerService","code","characters","handler","lockSwipes","timeout","setTimeout","back","clearTimeout","key","substring","length","create","message","loading","present","canPrint","err","error","validationError","emit","errorMessage","dismiss","showError","validateAndPrint","subscribe","res","validationSuccess","console","log","slideTo","$input","input","el","className","replace","selector","template"],"mappings":"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","file":"pages-validate-order-code-validate-order-code-module-es5.js","sourcesContent":["export default \"<ion-content>\\n\\n  <ion-button id=\\\"back\\\" size=\\\"small\\\" shape=\\\"round\\\" color=\\\"dark\\\" (click)=\\\"goBack()\\\">\\n    <ion-label>{{'Common.back' | translate}}</ion-label>\\n  </ion-button>\\n\\n  <div id=\\\"code-wrapper\\\">\\n    <div>\\n      <ion-item lines=\\\"none\\\">\\n        <ion-input #input type=\\\"text\\\" readonly [placeholder]=\\\"'ValidateOrderCode.code_placeholder' | translate\\\"\\n          [(ngModel)]=\\\"code\\\">\\n        </ion-input>\\n      </ion-item>\\n      <ion-slides #handler>\\n        <ion-slide>\\n          <ion-button id=\\\"validate\\\" fill=\\\"outline\\\" shape=\\\"round\\\" color=\\\"dark\\\" (click)=\\\"validate()\\\">\\n            <ion-label>{{'ValidateOrderCode.validate' | translate}}</ion-label>\\n          </ion-button>\\n        </ion-slide>\\n        <ion-slide class=\\\"errorMessage\\\" [innerHTML]=\\\"'Errors.' + errorMessage | translate\\\"></ion-slide>\\n      </ion-slides>\\n\\n    </div>\\n  </div>\\n\\n  <div id=\\\"keyboard-wrapper\\\">\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <ion-grid class=\\\"keyboard\\\">\\n            <ion-row *ngFor=\\\"let line of characters\\\">\\n              <ion-col size=\\\"1\\\" class=\\\"key-wrapper\\\" *ngFor=\\\"let c of line\\\">\\n                <div class=\\\"key\\\" (click)=\\\"pressKey(c)\\\">\\n                  <div>{{c}}</div>\\n                </div>\\n              </ion-col>\\n              <ion-col *ngIf=\\\"line.length == 9\\\" class=\\\"key-wrapper\\\" size='1'>\\n                <div class=\\\"key negate\\\" (click)=\\\"backspace()\\\">\\n                  <div style=\\\"text-transform: uppercase; padding: 1em 0.8em\\\">\\n                    <ion-icon name=\\\"backspace-sharp\\\" style=\\\"--padding-start:0; --padding-end: 0;\\\"></ion-icon>\\n                  </div>\\n                </div>\\n              </ion-col>\\n              <ion-col *ngIf=\\\"line.length == 7\\\" class=\\\"key-wrapper\\\" size='3'>\\n                <div class=\\\"key negate\\\" (click)=\\\"validate()\\\">\\n                  <div style=\\\"text-transform: uppercase;\\\">{{'ValidateOrderCode.validate' | translate}}</div>\\n                </div>\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ValidateOrderCodePage } from './validate-order-code.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ValidateOrderCodePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ValidateOrderCodePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ValidateOrderCodePageRoutingModule } from './validate-order-code-routing.module';\n\nimport { ValidateOrderCodePage } from './validate-order-code.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ValidateOrderCodePageRoutingModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [ValidateOrderCodePage]\n})\nexport class ValidateOrderCodePageModule {}\n","export default \".key-wrapper > div {\\n  margin: 0.1em;\\n  border-radius: 0.5em;\\n  border: 1px solid white;\\n  display: flex;\\n  align-items: center;\\n}\\n.key-wrapper > div > div {\\n  margin: 0 auto;\\n  padding: 1em;\\n  text-align: center;\\n}\\nion-grid.keyboard {\\n  --ion-grid-columns: 10;\\n}\\nion-slides ion-slide {\\n  width: 100% !important;\\n}\\n.negate {\\n  border: 3px solid white;\\n}\\n#code-wrapper {\\n  width: 100%;\\n  height: 80%;\\n  display: flex;\\n  align-items: center;\\n}\\n#code-wrapper > div {\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n#code-wrapper > div ion-item {\\n  zoom: 3;\\n  max-width: 50vw;\\n  text-align: center;\\n}\\n#code-wrapper > div ion-button {\\n  margin-top: 1em;\\n  text-transform: uppercase;\\n}\\n#keyboard-wrapper {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  width: 100%;\\n}\\n#back {\\n  position: absolute;\\n  top: 1em;\\n  left: 1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdmFsaWRhdGUtb3JkZXItY29kZS92YWxpZGF0ZS1vcmRlci1jb2RlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNJLGFBQUE7RUFDQSxvQkFBQTtFQUNBLHVCQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0FBRFI7QUFHUTtFQUNJLGNBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7QUFEWjtBQU1BO0VBQ0ksc0JBQUE7QUFISjtBQU9JO0VBQ0ksc0JBQUE7QUFKUjtBQVFBO0VBQ0ksdUJBQUE7QUFMSjtBQVFBO0VBQ0ksV0FBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7QUFMSjtBQU9JO0VBQ0ksY0FBQTtFQUNBLGtCQUFBO0FBTFI7QUFPUTtFQUNJLE9BQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7QUFMWjtBQVFRO0VBQ0ksZUFBQTtFQUNBLHlCQUFBO0FBTlo7QUFXQTtFQUNJLGtCQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxXQUFBO0FBUko7QUFXQTtFQUNJLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7QUFSSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3ZhbGlkYXRlLW9yZGVyLWNvZGUvdmFsaWRhdGUtb3JkZXItY29kZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIua2V5LXdyYXBwZXIge1xuICAgIFxuICAgID4gZGl2IHtcbiAgICAgICAgbWFyZ2luOiAwLjFlbTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMC41ZW07XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBcbiAgICAgICAgPiBkaXYge1xuICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgICBwYWRkaW5nOiAxZW07XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmlvbi1ncmlkLmtleWJvYXJkIHtcbiAgICAtLWlvbi1ncmlkLWNvbHVtbnM6IDEwO1xufVxuXG5pb24tc2xpZGVzIHtcbiAgICBpb24tc2xpZGUgeyBcbiAgICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcbiAgICB9XG59XG5cbi5uZWdhdGUge1xuICAgIGJvcmRlcjogM3B4IHNvbGlkIHdoaXRlO1xufVxuXG4jY29kZS13cmFwcGVyIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDgwJTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICA+IGRpdiB7XG4gICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG5cbiAgICAgICAgaW9uLWl0ZW0ge1xuICAgICAgICAgICAgem9vbTogMztcbiAgICAgICAgICAgIG1heC13aWR0aDogNTB2dztcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlclxuICAgICAgICB9XG5cbiAgICAgICAgaW9uLWJ1dHRvbiB7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAxZW07XG4gICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4ja2V5Ym9hcmQtd3JhcHBlciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvdHRvbTogMDtcbiAgICBsZWZ0OiAwOyBcbiAgICB3aWR0aDogMTAwJTtcbn1cblxuI2JhY2sge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDFlbTtcbiAgICBsZWZ0OiAxZW07XG59XG5cbiJdfQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NavController, LoadingController, IonSlides, IonInput } from '@ionic/angular';\nimport { Global } from '../../services/global';\nimport { OrdersService } from '../../services/orders.service';\nimport { PrinterService } from '../../services/printer.service';\n\n@Component({\n  selector: 'app-validate-order-code',\n  templateUrl: './validate-order-code.page.html',\n  styleUrls: ['./validate-order-code.page.scss'],\n})\nexport class ValidateOrderCodePage implements OnInit {\n\n  @ViewChild('handler') handler: IonSlides;\n  @ViewChild('input') input: any;\n\n  public code: string = '';\n  public errorMessage: string;\n  public characters = [\n    ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\n    ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],\n    ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],\n    ['Z', 'X', 'C', 'V', 'B', 'N', 'M']\n  ];\n  private timeout;\n\n  constructor(private navCtrl: NavController,\n    private ordersService: OrdersService,\n    private loadingCtrl: LoadingController,\n    private printerService: PrinterService) { }\n\n  ngOnInit() {\n\n  }\n\n  ionViewWillEnter() {\n    this.handler.lockSwipes(true);\n    this.timeout = setTimeout(() => {\n      this.navCtrl.back();\n    }, 3 * 60 * 1000)\n  }\n\n  ionViewWillLeave() {\n    clearTimeout(this.timeout)\n  }\n\n  pressKey(key: string) {\n    this.code += key;\n  }\n\n  backspace() {\n    this.code = this.code.substring(0, this.code.length - 1);\n  }\n\n  goBack() {\n    this.navCtrl.back();\n  }\n\n  async validate() {\n    let loading = await this.loadingCtrl.create({ message: \"loading...\" });\n    loading.present();\n\n    let canPrint = await this.printerService.canPrint();\n    if (!canPrint) {\n      let err = { error: { code: \"_CANT_PRINT\" } };\n      Global.validationError.emit(err);\n      this.errorMessage = err.error.code;\n\n      await loading.dismiss();\n      this.showError();\n      return;\n    }\n\n    this.ordersService.validateAndPrint(this.code)\n      .subscribe(res => {\n        loading.dismiss();\n        Global.validationSuccess.emit(true);\n        this.navCtrl.back();\n        console.log(res);\n      }, err => {\n        this.errorMessage = err.error.code;\n        loading.dismiss();\n        this.showError();\n      });\n\n    // this.ordersService.validateOrderByCode(this.code)\n    //   .subscribe(async (res: any) => {\n    //     loading.dismiss();\n    //     if (res)\n    //       await this.printerService.printOrder(res);\n    //     Global.validationSuccess.emit(true);\n    //     this.navCtrl.back();\n    //   }, err => {\n    //     this.errorMessage = err.error.code;\n    //     loading.dismiss();\n    //     this.showError();\n    //   })\n  }\n\n  async showError() {\n    this.handler.lockSwipes(false);\n    this.handler.slideTo(1);\n    this.handler.lockSwipes(true);\n    let $input = this.input.el;\n    $input.className += ' shake';\n\n    setTimeout(() => {\n      this.handler.lockSwipes(false);\n      this.handler.slideTo(0);\n      this.handler.lockSwipes(true);\n      this.code = ''\n      $input.className = $input.className.replace(' shake', '');\n    }, 3000)\n  }\n\n}\n"]}