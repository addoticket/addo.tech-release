{"version":3,"sources":["./src/app/pages/validate-order-code/validate-order-code.page.html","./src/app/pages/validate-order-code/validate-order-code-routing.module.ts","./src/app/pages/validate-order-code/validate-order-code.module.ts","./src/app/pages/validate-order-code/validate-order-code.page.scss","./src/app/pages/validate-order-code/validate-order-code.page.ts"],"names":[],"mappings":"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","file":"pages-validate-order-code-validate-order-code-module-es2015.js","sourcesContent":["export default \"<ion-content>\\n\\n  <ion-button id=\\\"back\\\" size=\\\"small\\\" shape=\\\"round\\\" color=\\\"dark\\\" (click)=\\\"goBack()\\\">\\n    <ion-label>{{'Common.back' | translate}}</ion-label>\\n  </ion-button>\\n\\n  <div id=\\\"code-wrapper\\\">\\n    <div>\\n      <ion-item lines=\\\"none\\\">\\n        <ion-input #input type=\\\"text\\\" readonly [placeholder]=\\\"'ValidateOrderCode.code_placeholder' | translate\\\"\\n          [(ngModel)]=\\\"code\\\">\\n        </ion-input>\\n      </ion-item>\\n      <ion-slides #handler>\\n        <ion-slide>\\n          <ion-button id=\\\"validate\\\" fill=\\\"outline\\\" shape=\\\"round\\\" color=\\\"dark\\\" (click)=\\\"validate()\\\">\\n            <ion-label>{{'ValidateOrderCode.validate' | translate}}</ion-label>\\n          </ion-button>\\n        </ion-slide>\\n        <ion-slide class=\\\"errorMessage\\\" [innerHTML]=\\\"'Errors.' + errorMessage | translate\\\"></ion-slide>\\n      </ion-slides>\\n\\n    </div>\\n  </div>\\n\\n  <div id=\\\"keyboard-wrapper\\\">\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <ion-grid class=\\\"keyboard\\\">\\n            <ion-row *ngFor=\\\"let line of characters\\\">\\n              <ion-col size=\\\"1\\\" class=\\\"key-wrapper\\\" *ngFor=\\\"let c of line\\\">\\n                <div class=\\\"key\\\" (click)=\\\"pressKey(c)\\\">\\n                  <div>{{c}}</div>\\n                </div>\\n              </ion-col>\\n              <ion-col *ngIf=\\\"line.length == 9\\\" class=\\\"key-wrapper\\\" size='1'>\\n                <div class=\\\"key negate\\\" (click)=\\\"backspace()\\\">\\n                  <div style=\\\"text-transform: uppercase; padding: 1em 0.8em\\\">\\n                    <ion-icon name=\\\"backspace-sharp\\\" style=\\\"--padding-start:0; --padding-end: 0;\\\"></ion-icon>\\n                  </div>\\n                </div>\\n              </ion-col>\\n              <ion-col *ngIf=\\\"line.length == 7\\\" class=\\\"key-wrapper\\\" size='3'>\\n                <div class=\\\"key negate\\\" (click)=\\\"validate()\\\">\\n                  <div style=\\\"text-transform: uppercase;\\\">{{'ValidateOrderCode.validate' | translate}}</div>\\n                </div>\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ValidateOrderCodePage } from './validate-order-code.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ValidateOrderCodePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ValidateOrderCodePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ValidateOrderCodePageRoutingModule } from './validate-order-code-routing.module';\n\nimport { ValidateOrderCodePage } from './validate-order-code.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ValidateOrderCodePageRoutingModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [ValidateOrderCodePage]\n})\nexport class ValidateOrderCodePageModule {}\n","export default \".key-wrapper > div {\\n  margin: 0.1em;\\n  border-radius: 0.5em;\\n  border: 1px solid white;\\n  display: flex;\\n  align-items: center;\\n}\\n.key-wrapper > div > div {\\n  margin: 0 auto;\\n  padding: 1em;\\n  text-align: center;\\n}\\nion-grid.keyboard {\\n  --ion-grid-columns: 10;\\n}\\nion-slides ion-slide {\\n  width: 100% !important;\\n}\\n.negate {\\n  border: 3px solid white;\\n}\\n#code-wrapper {\\n  width: 100%;\\n  height: 80%;\\n  display: flex;\\n  align-items: center;\\n}\\n#code-wrapper > div {\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n#code-wrapper > div ion-item {\\n  zoom: 3;\\n  max-width: 50vw;\\n  text-align: center;\\n}\\n#code-wrapper > div ion-button {\\n  margin-top: 1em;\\n  text-transform: uppercase;\\n}\\n#keyboard-wrapper {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  width: 100%;\\n}\\n#back {\\n  position: absolute;\\n  top: 1em;\\n  left: 1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdmFsaWRhdGUtb3JkZXItY29kZS92YWxpZGF0ZS1vcmRlci1jb2RlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNJLGFBQUE7RUFDQSxvQkFBQTtFQUNBLHVCQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0FBRFI7QUFHUTtFQUNJLGNBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7QUFEWjtBQU1BO0VBQ0ksc0JBQUE7QUFISjtBQU9JO0VBQ0ksc0JBQUE7QUFKUjtBQVFBO0VBQ0ksdUJBQUE7QUFMSjtBQVFBO0VBQ0ksV0FBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7QUFMSjtBQU9JO0VBQ0ksY0FBQTtFQUNBLGtCQUFBO0FBTFI7QUFPUTtFQUNJLE9BQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7QUFMWjtBQVFRO0VBQ0ksZUFBQTtFQUNBLHlCQUFBO0FBTlo7QUFXQTtFQUNJLGtCQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxXQUFBO0FBUko7QUFXQTtFQUNJLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7QUFSSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3ZhbGlkYXRlLW9yZGVyLWNvZGUvdmFsaWRhdGUtb3JkZXItY29kZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIua2V5LXdyYXBwZXIge1xuICAgIFxuICAgID4gZGl2IHtcbiAgICAgICAgbWFyZ2luOiAwLjFlbTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMC41ZW07XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBcbiAgICAgICAgPiBkaXYge1xuICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgICBwYWRkaW5nOiAxZW07XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmlvbi1ncmlkLmtleWJvYXJkIHtcbiAgICAtLWlvbi1ncmlkLWNvbHVtbnM6IDEwO1xufVxuXG5pb24tc2xpZGVzIHtcbiAgICBpb24tc2xpZGUgeyBcbiAgICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcbiAgICB9XG59XG5cbi5uZWdhdGUge1xuICAgIGJvcmRlcjogM3B4IHNvbGlkIHdoaXRlO1xufVxuXG4jY29kZS13cmFwcGVyIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDgwJTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICA+IGRpdiB7XG4gICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG5cbiAgICAgICAgaW9uLWl0ZW0ge1xuICAgICAgICAgICAgem9vbTogMztcbiAgICAgICAgICAgIG1heC13aWR0aDogNTB2dztcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlclxuICAgICAgICB9XG5cbiAgICAgICAgaW9uLWJ1dHRvbiB7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAxZW07XG4gICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4ja2V5Ym9hcmQtd3JhcHBlciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvdHRvbTogMDtcbiAgICBsZWZ0OiAwOyBcbiAgICB3aWR0aDogMTAwJTtcbn1cblxuI2JhY2sge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDFlbTtcbiAgICBsZWZ0OiAxZW07XG59XG5cbiJdfQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NavController, LoadingController, IonSlides, IonInput } from '@ionic/angular';\nimport { Global } from '../../services/global';\nimport { OrdersService } from '../../services/orders.service';\nimport { PrinterService } from '../../services/printer.service';\n\n@Component({\n  selector: 'app-validate-order-code',\n  templateUrl: './validate-order-code.page.html',\n  styleUrls: ['./validate-order-code.page.scss'],\n})\nexport class ValidateOrderCodePage implements OnInit {\n\n  @ViewChild('handler') handler: IonSlides;\n  @ViewChild('input') input: any;\n\n  public code: string = '';\n  public errorMessage: string;\n  public characters = [\n    ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\n    ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],\n    ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],\n    ['Z', 'X', 'C', 'V', 'B', 'N', 'M']\n  ];\n  private timeout;\n\n  constructor(private navCtrl: NavController,\n    private ordersService: OrdersService,\n    private loadingCtrl: LoadingController,\n    private printerService: PrinterService) { }\n\n  ngOnInit() {\n\n  }\n\n  ionViewWillEnter() {\n    this.handler.lockSwipes(true);\n    this.timeout = setTimeout(() => {\n      this.navCtrl.back();\n    }, 3 * 60 * 1000)\n  }\n\n  ionViewWillLeave() {\n    clearTimeout(this.timeout)\n  }\n\n  pressKey(key: string) {\n    this.code += key;\n  }\n\n  backspace() {\n    this.code = this.code.substring(0, this.code.length - 1);\n  }\n\n  goBack() {\n    this.navCtrl.back();\n  }\n\n  async validate() {\n    let loading = await this.loadingCtrl.create({ message: \"loading...\" });\n    loading.present();\n\n    let canPrint = await this.printerService.canPrint();\n    if (!canPrint) {\n      let err = { error: { code: \"_CANT_PRINT\" } };\n      Global.validationError.emit(err);\n      this.errorMessage = err.error.code;\n\n      await loading.dismiss();\n      this.showError();\n      return;\n    }\n\n    this.ordersService.validateAndPrint(this.code)\n      .subscribe(res => {\n        loading.dismiss();\n        Global.validationSuccess.emit(true);\n        this.navCtrl.back();\n        console.log(res);\n      }, err => {\n        this.errorMessage = err.error.code;\n        loading.dismiss();\n        this.showError();\n      });\n\n    // this.ordersService.validateOrderByCode(this.code)\n    //   .subscribe(async (res: any) => {\n    //     loading.dismiss();\n    //     if (res)\n    //       await this.printerService.printOrder(res);\n    //     Global.validationSuccess.emit(true);\n    //     this.navCtrl.back();\n    //   }, err => {\n    //     this.errorMessage = err.error.code;\n    //     loading.dismiss();\n    //     this.showError();\n    //   })\n  }\n\n  async showError() {\n    this.handler.lockSwipes(false);\n    this.handler.slideTo(1);\n    this.handler.lockSwipes(true);\n    let $input = this.input.el;\n    $input.className += ' shake';\n\n    setTimeout(() => {\n      this.handler.lockSwipes(false);\n      this.handler.slideTo(0);\n      this.handler.lockSwipes(true);\n      this.code = ''\n      $input.className = $input.className.replace(' shake', '');\n    }, 3000)\n  }\n\n}\n"],"sourceRoot":"webpack:///"}